<!DOCTYPE html>
<html lang="ko-KR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/style.css" />
    <title>상세 정보: HODU</title>
  </head>
  <body class="details">
    <header>
      <div class="header-left">
        <h1>
          <a href="/"><img src="/images/Logo-hodu.png" alt="HODU" /></a>
        </h1>
        <form action="/search">
          <input
            type="text"
            name="search"
            id="search"
            placeholder="상품을 검색해보세요!"
          />
          <button class="search-btn">
            <img src="/images/icon-search.svg " alt="검색" />
          </button>
        </form>
      </div>
      <nav class="header-right">
        <ul>
          <li>
            <a href="/cart"
              ><img src="/images/icon-shopping-cart.svg" alt="" />장바구니</a
            >
          </li>
          <li>
            <a href="/login"
              ><img src="/images/icon-user.svg" alt="" />로그인</a
            >
          </li>
        </ul>
      </nav>
    </header>
    <main>
      <article class="product-info">
        <h2 class="sr-only">상품 정보</h2>
        <img
          src="/images/무릎담요-제품-소개1.png"
          alt="무릎 담요 상품 목업 이미지"
        />
        <div class="purchase">
          <div class="item-info">
            <p class="seller">백엔드글로벌</p>
            <p class="title">딥러닝 개발자 무릎 담요</p>
            <p class="price"><span>17,500</span>원</p>
          </div>
          <div class="buy-info">
            <p class="shipping">택배배송 / 무료배송</p>
            <div class="amount">
              <button>
                <img src="/images/icon-minus-line.svg" alt="빼기" />
              </button>
              <input type="number" value="1" step="1" disabled />
              <button>
                <img src="/images/icon-plus-line.svg" alt="더하기" />
              </button>
            </div>
            <p class="total">
              <span class="total-text">총 상품 금액</span>
              <span class="total-amount">
                <span class="amount"
                  >총 수량 <span class="count">1</span>개</span
                ><span class="value"
                  ><span class="total-price">17,500</span>원</span
                >
              </span>
            </p>
            <ul class="btn-row">
              <li><button class="purchase">바로 구매</button></li>
              <li><button class="cart">장바구니</button></li>
            </ul>
          </div>
        </div>
      </article>
      <article class="product-details">
        <h2 class="sr-only"></h2>
        <ul>
          <li><button class="active">버튼</button></li>
          <li><button>리뷰</button></li>
          <li><button>Q&A</button></li>
          <li><button>반품/교환정보</button></li>
        </ul>
      </article>
    </main>
    <footer>
      <nav>
        <ul class="legal">
          <li><a href="/info">호두샵 소개</a></li>
          <li><a href="/terms">이용약관</a></li>
          <li>
            <a href="/privacy"><strong>개인정보처리방침</strong></a>
          </li>
          <li><a href="/contract">전자금융거래약관</a></li>
          <li><a href="/teenages">청소년보호정책</a></li>
          <li><a href="/cooperation">제휴문의</a></li>
        </ul>
        <ul class="social">
          <li>
            <a href="https://instagram.com"
              ><img src="/images/icon-insta.svg" alt="인스타그램"
            /></a>
          </li>
          <li>
            <a href="https://facebook.com"
              ><img src="/images/icon-fb.svg" alt="페이스북"
            /></a>
          </li>
          <li>
            <a href="https://youtube.com"
              ><img src="/images/icon-yt.svg" alt="유튜브"
            /></a>
          </li>
        </ul>
      </nav>
      <ul class="shop-info">
        <li><strong>(주)HODU SHOP</strong></li>
        <li>제주특별자치도 제주시 동광고 137 제주코딩베이스캠프</li>
        <li>사업자 번호: 000-0000-0000 | 통신판매업</li>
        <li>대표 : 김호두</li>
      </ul>
    </footer>
    <dialog>
      <div class="window-controller">
        <button class="modal-no">
          <img src="/images/icon-delete.svg" alt="닫기" />
        </button>
      </div>
      <p>로그인이 필요한 서비스입니다.<br />로그인 하시겠습니까?</p>
      <ul>
        <li><button class="modal-no">아니요</button></li>
        <li><button class="modal-yes">예</button></li>
      </ul>
    </dialog>
    <script>
      const plusBtn = document.querySelector(".amount button:last-child");
      const minusBtn = document.querySelector(".amount button:first-child");
      const input = document.querySelector(".amount input");
      const totalAmount = document.querySelector(".total-amount .count");
      const originalPrice = document.querySelector(".price span");
      const totalPrice = document.querySelector(".total-amount .total-price");

      plusBtn.addEventListener("click", () => {
        input.value = parseInt(input.value) + 1;
        totalAmount.textContent = input.value;
        totalPrice.textContent = (
          parseInt(originalPrice.textContent.replace(",", "")) * input.value
        ).toLocaleString("ko-KR");
      });

      minusBtn.addEventListener("click", () => {
        if (parseInt(input.value) > 1) {
          input.value = parseInt(input.value) - 1;
          totalAmount.textContent = input.value;
          totalPrice.textContent = (
            parseInt(originalPrice.textContent.replace(",", "")) * input.value
          ).toLocaleString("ko-KR");
        }
      });

      const dialog = document.querySelector("dialog");
      const purchaseBtn = document.querySelector("button.purchase");
      const cartBtn = document.querySelector("button.cart");
      const closeBtn = document.querySelector(".window-controller button");
      const noBtns = document.querySelectorAll(".modal-no");
      const yesBtn = document.querySelector(".modal-yes");

      function openModal() {
        dialog.showModal();
        document.body.style.overflow = "hidden";
      }

      purchaseBtn.addEventListener("click", () => {
        openModal();
      });

      cartBtn.addEventListener("click", () => {
        openModal();
      });

      noBtns.forEach((btn) => {
        btn.addEventListener("click", () => {
          dialog.close();
          document.body.style.overflow = "auto";
        });
      });

      yesBtn.addEventListener("click", () => {
        location.href = "/login";
      });
    </script>
  </body>
</html>
